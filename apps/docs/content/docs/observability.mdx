---
title: Observability & Dashboard
description: List workflow instances and use the built-in dashboard
---

import { Callout } from 'fumadocs-ui/components/callout';

# Observability & Dashboard

Ablauf includes a built-in observability system for listing and monitoring workflow instances. Whether you're debugging in development or monitoring production, you have full visibility into your workflows.

## Listing Workflows

Ablauf tracks all workflow instances by type, allowing you to query and filter them:

```ts
const ablauf = new Ablauf(env.WORKFLOW_RUNNER, {
  workflows: [OrderWorkflow, PaymentWorkflow],
  observability: true, // enabled by default
});

// List all instances of a workflow type
const orders = await ablauf.list("process-order");

// Filter by status
const running = await ablauf.list("process-order", { status: "running" });

// Limit results (sorted by updatedAt, newest first)
const recent = await ablauf.list("process-order", { limit: 10 });
```

### Response Format

Each entry in the list is a `WorkflowIndexEntry`:

```ts
{
  id: string;
  status: string;
  createdAt: number;
  updatedAt: number;
}
```

For full details about a specific workflow, use `ablauf.status(id)`.

## How Indexing Works

Under the hood, Ablauf uses **shard-based indexing** with dedicated Durable Objects for index storage. When observability is enabled, every workflow state change is recorded in one or more index shards.

By default, Ablauf uses a single shard per workflow type. For high-volume workflows (thousands of instances), you can increase the shard count to distribute load:

```ts
const ablauf = new Ablauf(env.WORKFLOW_RUNNER, {
  workflows: [
    [HighVolumeWorkflow, { shards: 8 }],
    [LowVolumeWorkflow, { shards: 1 }], // default
  ],
});
```

<Callout type="info">
More shards = better write throughput for high-volume workflow types, but queries need to fan out to all shards. Start with the default (1) and scale up as needed.
</Callout>

## Built-in Dashboard

Ablauf ships with a React dashboard for monitoring workflows in a browser. It's perfect for debugging during development and monitoring production workloads.

### Installation

```bash
npm install @ablauf/dashboard
```

### Setting Up the API

The dashboard needs an RPC endpoint to communicate with your worker. Add this to your worker:

```ts
import { Ablauf } from "@ablauf/workflows";
import { Hono } from "hono";

const app = new Hono();

const ablauf = new Ablauf(env.WORKFLOW_RUNNER, {
  workflows: [OrderWorkflow, PaymentWorkflow],
});

const rpcHandler = ablauf.createRPCHandler();

app.use("/__ablauf/*", async (c, next) => {
  const { matched, response } = await rpcHandler.handle(c.req.raw, {
    prefix: "/__ablauf",
    context: ablauf.getDashboardContext(),
  });
  if (matched) return c.newResponse(response.body, response);
  await next();
});
```

<Callout type="warn">
The `/__ablauf` prefix can be anything you want, but make sure it matches when you run the dashboard CLI. Also, **don't expose this in production** without adding authentication — it provides full read access to all workflow data.
</Callout>

### Running the Dashboard

Once your worker is running, start the dashboard:

```bash
npx ablauf-dashboard --url http://localhost:8787
```

The dashboard will open in your browser and connect to your worker's RPC endpoint.

### Dashboard Features

The dashboard provides:

- **Workflow Instance List** — Browse all instances with filtering by type and status
- **Detailed Workflow View** — Inspect payload, result, and error details
- **Step Timeline** — Visualize step execution with a Gantt chart
- **Retry History** — See per-attempt details for steps with retry logic
- **Live Updates** — Real-time SSE updates as workflows execute

It's built with TanStack Router and React Query, providing a snappy, modern UI for workflow observability.

## Disabling Observability

If you don't need the list/dashboard features, you can disable observability to save on Durable Object operations:

```ts
const ablauf = new Ablauf(env.WORKFLOW_RUNNER, {
  workflows: [OrderWorkflow],
  observability: false,
});

// ablauf.list() will throw ObservabilityDisabledError
```

This skips all index updates, reducing the number of Durable Object writes. You can still use `ablauf.status(id)` to check individual workflows if you know their ID.

## Production Considerations

In production, you'll likely want:

1. **Authentication** on the `/__ablauf` endpoint to prevent unauthorized access
2. **Rate limiting** to protect against abuse
3. **CORS headers** if your dashboard is hosted on a different domain
4. **Reasonable shard counts** for high-volume workflow types (typically 2-8 shards)

Observability adds minimal overhead (one additional Durable Object write per status change), but for extremely high-volume workflows, disabling it and using custom metrics/logging may be more cost-effective.
